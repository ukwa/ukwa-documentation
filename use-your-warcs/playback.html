
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Playback &#8212; UKWA Technical Documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Search" href="search.html" />
    <link rel="prev" title="Integration" href="integration.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      <img src="../_static/ukwa-2018-onwhite-close.svg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">UKWA Technical Documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <p class="caption">
 <span class="caption-text">
  Using the UK Web Archive
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../using-ukwa-services/index.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../opendata/_index.html">
   Datasets
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../opendata/ukwa.ds.1/_index.html">
     UK Selective Web Archive
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../opendata/ukwa.ds.1/classification/index.html">
       UK Selective Web Archive Classification Dataset
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../opendata/ukwa.ds.2/_index.html">
     JISC UK Web Domain Dataset
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../opendata/ukwa.ds.2/cdx/index.html">
       Crawled URL Index
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../opendata/ukwa.ds.2/fmt/index.html">
       Format Profile
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../opendata/ukwa.ds.2/geo/index.html">
       Geoindex
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../opendata/ukwa.ds.2/linkage/index.html">
       Links by Domain Suffix
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../opendata/ukwa.ds.2/host-linkage/index.html">
       Host Link Graph
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  How UKWA Works
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../how-ukwa-works/_index.html">
   Goals &amp; Principles
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../how-ukwa-works/arch/overview.html">
   Technical Architecture
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../how-ukwa-works/arch/ingest.html">
     Ingest Services
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../how-ukwa-works/arch/manage.html">
     Management Services
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../how-ukwa-works/arch/access.html">
     Access Services
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../how-ukwa-works/management/_index.html">
   Management
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../how-ukwa-works/management/op_act.html">
     Operations
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../how-ukwa-works/management/ops/001_crawling.html">
       Crawler Operations
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../how-ukwa-works/management/ops/010_crawler_setup_aws_dc.html">
       Setting up a AWS Cloud server for the Domain Crawl
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../how-ukwa-works/management/op_response.html">
     Runbooks
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../how-ukwa-works/management/runbooks/001_cdx_outage.html">
       Switching over to the secondary CDX service
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Run Your Own Web Archives
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../make-your-own-warcs/index.html">
   Make your own WARCs
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Use Your WARCs
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="analysis.html">
     Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="integration.html">
     Integration
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Playback
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="search.html">
     Search
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/use-your-warcs/playback.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/ukwa/ukwa-documentation"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/ukwa/ukwa-documentation/issues/new?title=Issue%20on%20page%20%2Fuse-your-warcs/playback.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/ukwa/ukwa-documentation/edit/master/content/use-your-warcs/playback.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#small-collections">
   Small Collections
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#upload-to-webrecorder-io">
     Upload to Webrecorder.io
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#open-using-the-webrecorder-player">
     Open using the Webrecorder Player
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#large-collections">
   Large Collections
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#big-sorted-cdx-file">
     Big, sorted CDX file.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-cdx-server">
     A CDX Server
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#comparing-these-approaches">
     Comparing these approaches
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#accessing-your-warc-files">
   Accessing Your WARC Files
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="playback">
<h1>Playback<a class="headerlink" href="#playback" title="Permalink to this headline">¶</a></h1>
<p>To play back archived resources, we need to be able to look content up by URL – mapping
the requested URL to the WARC records that contain that content as seen at different times.
This is usually done using three components:</p>
<ol class="simple">
<li><p>A content index (CDX) that maps URLs to the series of <code class="docutils literal notranslate"><span class="pre">(WARC</span> <span class="pre">filename,</span> <span class="pre">offset)</span></code> results, one for each crawled instance, where the <code class="docutils literal notranslate"><span class="pre">offset</span></code> refers to the position in the WARC file where the corresponding WARC Record begins.</p></li>
<li><p>A resource locator that takes the WARC filename and offset and retrieves the corresponding WARC record.</p></li>
<li><p>A replay interface that allows the user to request URIs and performs and performs any necessary modifications (e.g. re-writing links) before delivering the response to the user.</p></li>
</ol>
<p>When operating at small scale (maybe a few million WARC records at most), tools like pywb and OpenWayback can do all of these for you. However, when you have a lot of resources, you’ll probably need to manage the CDX separately.</p>
<div class="section" id="small-collections">
<h2>Small Collections<a class="headerlink" href="#small-collections" title="Permalink to this headline">¶</a></h2>
<p>If you have collections of WARC files that is a manageable size, i.e. you have enough time and resources to deal with them manually, there are a few ways to quickly open them up and take a look.</p>
<div class="section" id="upload-to-webrecorder-io">
<h3>Upload to <a class="reference external" href="http://Webrecorder.io">Webrecorder.io</a><a class="headerlink" href="#upload-to-webrecorder-io" title="Permalink to this headline">¶</a></h3>
<p>You can create a free account on <a class="reference external" href="https://webrecorder.io/">webrecorder.io</a>, and use the <code class="docutils literal notranslate"><span class="pre">Upload</span></code> button to create an online collection, which is private by default but can be made public if you wish.  From there, the Webrecorder service offers a range of playback options, including access via a range of older web browsers.</p>
</div>
<div class="section" id="open-using-the-webrecorder-player">
<h3>Open using the Webrecorder Player<a class="headerlink" href="#open-using-the-webrecorder-player" title="Permalink to this headline">¶</a></h3>
<p>If you want to access your WARCs locally, one option is to install the <a class="reference external" href="https://github.com/webrecorder/webrecorder-player#webrecorder-player">Webrecorder Player</a>. This offers a similar interface to the <a class="reference external" href="http://Webrecorder.io">Webrecorder.io</a> service, but everything is run locally.</p>
</div>
</div>
<div class="section" id="large-collections">
<h2>Large Collections<a class="headerlink" href="#large-collections" title="Permalink to this headline">¶</a></h2>
<p>Here we describe the two main approaches used for large-scale CDX indexes<a class="footnote-reference brackets" href="#id2" id="id1">1</a>.</p>
<div class="section" id="big-sorted-cdx-file">
<h3>Big, sorted CDX file.<a class="headerlink" href="#big-sorted-cdx-file" title="Permalink to this headline">¶</a></h3>
<p>A large file, generally constructed using OpenWayback or Pywb’s cdx-indexer tools and GNU sort. The basic workflow would be:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ensure sort order is not locale-sensitive</span>
<span class="nb">export</span> <span class="nv">LC_ALL</span><span class="o">=</span>C
cdx-indexer warc1.warc <span class="p">|</span> sort &gt; warc1.cdx
cdx-indexer warc2.warc <span class="p">|</span> sort &gt; warc2.cdx
...
sort --merge warc1.cdx warc2.cdx warc3.cdx ... &gt; big.cdx
</pre></div>
</div>
<p>For large scale sorting ensure you give <code class="docutils literal notranslate"><span class="pre">sort</span></code> a large amount of RAM with <code class="docutils literal notranslate"><span class="pre">--buffer-size</span></code> and set <code class="docutils literal notranslate"><span class="pre">--temporary-directory</span></code> to somewhere that can fit the whole dataset.</p>
<p>Generally people using this option have some sort of scheme for doing incremental updates. Like a big master CDX file and one or more smaller ones they add to incrementally and then periodically merge into the big one.</p>
</div>
<div class="section" id="a-cdx-server">
<h3>A CDX Server<a class="headerlink" href="#a-cdx-server" title="Permalink to this headline">¶</a></h3>
<p>A “CDX server” which can incrementally be updated. OutbackCDX is my one, used I think currently by Australia, British Library and New Zealand. SolrWayback is another option. Finally Ilya mentioned recently that PyWb can use a Redis server for this purpose.</p>
</div>
<div class="section" id="comparing-these-approaches">
<h3>Comparing these approaches<a class="headerlink" href="#comparing-these-approaches" title="Permalink to this headline">¶</a></h3>
<p>The tradeoffs:</p>
<ul class="simple">
<li><p>Big sorted CDX file: nice option if your collection doesn’t change much. Very easy to understand - just sorted a text file. Very amenable to processing using platforms like Hadoop.</p></li>
<li><p>OutbackCDX: stores the index compressed - about 1/5th the size of the corresponding CDX files. Quite convenient for incremental updates.</p></li>
<li><p>SolrWayback: saves you from maintaining separate Solr and CDX indexes. Although it sounds like in your case you aren’t planning to do full text search so this option doesn’t make that much sense.</p></li>
<li><p>Redis: off the shelf database tool, intended for datasets that fit inside memory, no compression (although you could possibly use an alternative implementation like LedisDB to gain some of those features)</p></li>
</ul>
</div>
</div>
<div class="section" id="accessing-your-warc-files">
<h2>Accessing Your WARC Files<a class="headerlink" href="#accessing-your-warc-files" title="Permalink to this headline">¶</a></h2>
<p>If you need to integrate with your organisations storage facility, rather than using the local filesystem, you’ll need to configure
your playback software to use an external resource locator service.</p>
<ul class="simple">
<li><p>HTTP Server supporting byte range requests</p></li>
<li><p>HttpFS</p></li>
<li><p>…</p></li>
</ul>
<hr class="footnotes docutils" />
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Thanks to <a class="reference external" href="https://twitter.com/atosborne">Alex Osborne</a> of the <a class="reference external" href="https://www.nla.gov.au/">National Library of Australia</a> for providing most of this information.</p>
</dd>
</dl>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./use-your-warcs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="integration.html" title="previous page">Integration</a>
    <a class='right-next' id="next-link" href="search.html" title="next page">Search</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By The UK Web Archive<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>